---
title: "Homework 2"
output: github_document
date: "2025-09-30"
---

Loading the library first: 

```{r}
library(tidyverse)
library(lubridate)
```

Getting the exact path:
```{r}
getwd()
```

Getting the data frames up on the R:
```{r}
pols_month = 
  read_csv("/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/pols-month.csv") 

unemployment = 
  read_csv("/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/unemployment.csv") 

snp = 
  read_csv("/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/snp.csv") 

```

## Working on pols_month -- first part of Problem 1.

Step 1. Separate by year/month/day.
Step 2. Replace month number with a month name.
Step 3. Create 'president' variable taking values gop and dem. First, I used a second mutate to add new variable but that didn't work so i merged 'mutate'.
Step 4. Using `select` removed columns. 

```{r}
pols_month =
  read_csv("/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/pols-month.csv")
  pols_month_clean = pols_month %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) %>% 
  mutate(
    month = month.name[month],
    president = case_when(
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem"
  )
) %>% 

select(-prez_dem, -prez_gop, -day) 
 
```



## 2nd part of Problem 1 -- snp.csv 
Step 1. Arrange according to year/month - these are first columns. 
Step 2. Lubridate package and then used it to oprganized with year and month as the separate wasn't working. 

```{r}
snp =
  read_csv("/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/snp.csv")
  snp_clean <- snp %>%
  mutate(date = mdy(date),                
         year = year(date),
         month = month(date, label = TRUE, abbr = FALSE)) %>%  
  select(year, month, everything()) %>%
  arrange(year, match(as.character(month), month.name))

head(snp_clean)
```


## Part 3 of Problem 1 -- unemployment data.

```{r}
unemployment_long <- unemployment %>% 
  pivot_longer(
    cols = -Year,          
    names_to = "month",
    values_to = "unemployment_rate"
  ) %>% 
  rename(year = Year) %>%  
  mutate(
    month = case_when(
      month %in% c("1", "01", "Jan") ~ "January",
      month %in% c("2","02","Feb") ~ "February",
      month %in% c("3","03","Mar") ~ "March",
      month %in% c("4","04","Apr") ~ "April",
      month %in% c("5","05","May") ~ "May",
      month %in% c("6","06","Jun") ~ "June",
      month %in% c("7","07","Jul") ~ "July",
      month %in% c("8","08","Aug") ~ "August",
      month %in% c("9","09","Sep") ~ "September",
      month %in% c("10","Oct") ~ "October",
      month %in% c("11","Nov") ~ "November",
      month %in% c("12","Dec") ~ "December"
    )
  ) %>%
  arrange(year, match(month, month.name))

head(unemployment_long)

```

## Part 4 of Problem 1 -- mergning. 


```{r}
combined_df = pols_month_clean %>%
  left_join(snp_clean, by = c("year", "month")) %>%
  left_join(unemployment_long, by = c("year", "month"))

glimpse(combined_df)
```

The combined dataset merges U.S. politics, stock market, and unemployment data. It spans 1947â€“2015, with 12 variables including party counts in government, presidential affiliation, S&P 500 closing values, unemployment rates, and time (year, month).

## Problem 2 part 1 with mr. Trash Wheel 

```{r}
library(readxl)
library(dplyr)
```


```{r}
mr_trashwheel <- read_excel(
  "/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/Trash_Wheel_Collection_Data.xlsx",
  sheet = "Mr. Trash Wheel"
) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(
    sports_balls = as.integer(round(sports_balls)),
    trash_wheel = "Mr. Trash Wheel"
  ) %>% 
  select(dumpster, month, year, date, weight_tons, volume_cubic_yards,
         plastic_bottles, polystyrene, cigarette_butts, glass_bottles,
         plastic_bags, wrappers, sports_balls, homes_powered, trash_wheel)
```



## Problem 2 - part 2 with next data set. 

```{r}
professor_trashwheel <- read_excel(
  "/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/Trash_Wheel_Collection_Data.xlsx",
  sheet = "Professor Trash Wheel"
) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>%
  mutate(
    weight_tons = as.integer(round(weight_tons)),
    trash_wheel = "Professor Trash Wheel"
  ) %>% 
  select(dumpster, month, year, date, weight_tons, volume_cubic_yards,
         plastic_bottles, polystyrene, cigarette_butts, glass_bottles,
         plastic_bags, wrappers, homes_powered)
```



## Problem 2 -- Part 3 

```{r}
gwynnda = read_excel(
  "/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/Trash_Wheel_Collection_Data.xlsx",
  sheet = "Gwynns Falls Trash Wheel",
) %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%  
  mutate(
    weight_tons = as.integer(round(weight_tons)), 
    trash_wheel = "Gwynnda" 
  ) %>%
  select(dumpster, month, year, date, weight_tons, volume_cubic_yards,
         plastic_bottles, polystyrene, cigarette_butts,
         plastic_bags, wrappers, homes_powered)

```

Combining all the data:

```{r}

mr_trashwheel <- mr_trashwheel %>% mutate(year = as.integer(year))
professor_trashwheel <- professor_trashwheel %>% mutate(year = as.integer(year))
gwynnda <- gwynnda %>% mutate(year = as.integer(year))

all_trashwheels <- bind_rows(
  mr_trashwheel,
  professor_trashwheel,
  gwynnda
)

glimpse(all_trashwheels)
head(all_trashwheels)

```


Final answer to the Problem 2. 


# To get number of observations from Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda this can be ran:

```{r}
num_obs = nrow(all_trashwheels)
```

The key variables are:
weight_tons, cigarette_butts, and homes_powered

# Total weight of trash collected by Professor Trash Wheel

```{r}
total_weight_prof = professor_trashwheel %>% 
  pull(weight_tons) %>% 
  sum(na.rm = TRUE)
```

# Total cigarette butts for Gwynnda in June 2022:
```{r}
total_cigs_gwynnda_june22 = gwynnda %>% 
  filter(year == 2022, month == "June") %>% 
  pull(cigarette_butts) %>% 
  sum(na.rm = TRUE)
```


## Problem 3. 


```{r}
zori <- read_csv("/Users/karolinawiesiolek/Desktop/Data_Science/Homeworks/Homework2/data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") %>% 
  janitor::clean_names()
```


